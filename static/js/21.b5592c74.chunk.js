(this["webpackJsonplearn-cesium"]=this["webpackJsonplearn-cesium"]||[]).push([[21],{126:function(e,t,r){"use strict";r.r(t);r(291);var a,n,i=r(295),o=r.n(i),c=r(259),s=r(260),l=r.n(s),u=r(367),d=r(261),p=r(85),b=r(86),h=r(87),v=r(88),m=r(11),f=r(84),y=r(294),w=r.n(y),g=r(23),j=[-85,36],O=[-84.9,36.1],C=(a=f.b.Cartesian3).fromDegrees.apply(a,j),D=(n=f.b.Cartesian3).fromDegrees.apply(n,O),P=[];function k(e){var t=w()(),r=t.clone().add(20,"s"),a=t.toISOString(),n=r.toISOString();return[{id:"document",name:"\u89c2\u5149\u8def\u7ebf",version:"1.0",clock:{interval:"".concat(a,"/").concat(n),currentTime:a,multiplier:1,range:"UNBOUNDED"}},{id:"path",name:"\u89c2\u5149\u8def\u7ebf",description:"<p>\u89c2\u5149\u8def\u7ebf</p>",availability:"".concat(a,"/").concat(n),path:{material:{polylineOutline:{color:{rgba:[0,0,0,255]},outlineColor:{rgba:[0,0,0,255]},outlineWidth:5}},width:8,leadTime:0,trailTime:1e3,resolution:5},point:{pixelSize:0,color:{rgba:[0,0,0,255]}},position:{epoch:a,cartographicDegrees:x(e)}}]}function x(e){return e.flatMap((function(e,t){return[20*t/80,f.b.Math.toDegrees(e.longitude),f.b.Math.toDegrees(e.latitude),e.height+30]}))}var S=function(e){Object(h.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(p.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={viewDisabled:!0},e.getPathPositions=Object(d.a)(l.a.mark((function t(){var r,a,n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],a=0;a<=80;++a)n=a/80,r.push(f.b.Cartographic.fromCartesian(f.b.Cartesian3.lerp(C,D,n,new f.b.Cartesian3)));return t.prev=2,t.next=5,f.b.sampleTerrain(e.terrainProvider,12,r);case 5:return i=t.sent,P=Object(u.a)(i),e.setState({viewDisabled:!1}),t.abrupt("return",P);case 11:return t.prev=11,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),e.clearPrevDataSource=function(){e.ds&&(e.viewer.dataSources.remove(e.ds,!0),e.viewer.trackedEntity=void 0)},e.setCameraPosition=function(){},e.loadCZML=function(){var t=Object(d.a)(l.a.mark((function t(r){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.clearPrevDataSource(),a=r?P:Object(u.a)(P).reverse(),t.prev=2,t.next=5,e.viewer.dataSources.add(f.b.CzmlDataSource.load(k(a)));case 5:e.ds=t.sent,n=e.ds.entities.getById("path"),e.viewer.zoomTo(n),e.viewer.trackedEntity=n,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.error(t.t0),e.flyTo(r);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),e.flyTo=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.clearPrevDataSource(),e.camera.flyTo({destination:Object(c.a)(f.b.Cartesian3.fromDegrees,Object(u.a)(t?O:j).concat([1e3])),orientation:{heading:f.b.Math.toRadians(0),pitch:f.b.Math.toRadians(-90),roll:f.b.Math.toRadians(0)}})},e}return Object(b.a)(r,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.terrainProvider=f.b.createWorldTerrain(),this.viewer=new f.b.Viewer("stage",{terrainProvider:this.terrainProvider,shouldAnimate:!0}),this.scene=this.viewer.scene,this.camera=this.scene.camera,this.scene.groundPrimitives.add(new f.b.GroundPolylinePrimitive({geometryInstances:new f.b.GeometryInstance({geometry:new f.b.GroundPolylineGeometry({positions:[C,D],width:4})})})),this.flyTo(),this.getPathPositions();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.viewDisabled;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"toolbar",children:[Object(g.jsx)(o.a,{className:"vtb",disabled:t,type:"primary",onClick:function(){return e.loadCZML()},children:"view to start"}),Object(g.jsx)(o.a,{className:"vtb",disabled:t,type:"primary",onClick:function(){return e.loadCZML(!0)},children:"view to end"}),Object(g.jsx)(o.a,{className:"vtb",type:"primary",onClick:function(){return e.flyTo()},children:"Fly to Start"}),Object(g.jsx)(o.a,{className:"vtb",type:"primary",onClick:function(){return e.flyTo(!0)},children:"Fly to end"})]}),Object(g.jsx)("div",{id:"stage"})]})}}]),r}(m.Component);t.default=S}}]);