(this["webpackJsonplearn-cesium"]=this["webpackJsonplearn-cesium"]||[]).push([[28],{146:function(t,e,i){"use strict";i.r(e);var a,r,n=i(57),o=i(45),s=i(10),l=i.n(s),d=i(13),c=i(14),b=i(16),u=i(26),p=i(27),h=i(15),m=i(100),y=i(34),f=(a=m.b.Cartesian3).fromDegrees.apply(a,[117.128202,36.209944]),M=(r=m.b.Cartesian3).fromDegrees.apply(r,[117.109628,36.257021]),v=new m.b.Cartesian3(50,50,50),g=function(t){Object(u.a)(i,t);var e=Object(p.a)(i);function i(){return Object(c.a)(this,i),e.apply(this,arguments)}return Object(b.a)(i,[{key:"componentDidMount",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new m.b.Viewer("stage",{terrainProvider:m.b.createWorldTerrain(),shouldAnimate:!0}),Object(m.a)(e,{}),t.next=4,m.b.sampleTerrainMostDetailed(e.terrainProvider,[m.b.Cartographic.fromCartesian(f),m.b.Cartographic.fromCartesian(M)]);case 4:i=t.sent,e.entities.add({position:m.b.Cartographic.toCartesian(i[0]),ellipsoid:{radii:v,material:m.b.Color.fromBytes(255,255,255,255)}}),e.entities.add({position:m.b.Cartographic.toCartesian(i[1]),ellipsoid:{radii:v,material:m.b.Color.fromBytes(255,255,255,255)}}),e.scene.groundPrimitives.add(new m.b.GroundPolylinePrimitive({geometryInstances:new m.b.GeometryInstance({geometry:new m.b.GroundPolylineGeometry({positions:[f,M],width:10})})})),a=C(f,M),e.scene.groundPrimitives.add(new m.b.GroundPolylinePrimitive({geometryInstances:new m.b.GeometryInstance({geometry:new m.b.GroundPolylineGeometry({positions:[f,a.groundPosition],width:10})})})),e.entities.add({position:a.groundPosition,ellipsoid:{radii:v,material:m.b.Color.fromBytes(255,255,255,255)}}),e.entities.add({position:a.position,ellipsoid:{radii:v,material:m.b.Color.fromBytes(255,255,255,255)}}),e.camera.setView({destination:a.position,orientation:{heading:m.b.Math.toRadians(a.heading),pitch:m.b.Math.toRadians(a.pitch),roll:m.b.Math.toRadians(a.roll)}});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(y.jsx)("div",{id:"stage"})}}]),i}(h.Component);function w(t){for(var e=m.b.Transforms.eastNorthUpToFixedFrame(t),i=m.b.Matrix4.inverse(e,new m.b.Matrix4),a=m.b.Matrix4.multiplyByPoint(i,t,new m.b.Cartesian3),r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];var l=n.map((function(t){return m.b.Matrix4.multiplyByPoint(i,t,new m.b.Cartesian3)}));return{positions:[a].concat(Object(o.a)(l)),localToWorldMatrix:e,worldToLocalMatrix:i}}function P(t,e,i,a){var r=i-t,n=a-e;if(0===r)return n>=0?0:180;if(0===n)return r>0?90:-90;var o=(i-t)/(a-e),s=Math.atan(o)/Math.PI*180;if(n>0)return s;var l=i-t>0?1:-1;return(180-Math.abs(s))*l}function C(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-45,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,r=w(t,e),o=r.positions,s=r.localToWorldMatrix,l=Object(n.a)(o,2),d=l[0],c=l[1],b=P(d.x,d.y,c.x,c.y),u=c.x-d.x,p=c.y-d.y,h=a*Math.abs(Math.sin(b/180*Math.PI))*(u>0?-1:1),y=a*Math.abs(Math.cos(b/180*Math.PI))*(p>0?-1:1),f=a/Math.abs(Math.tan(i/180*Math.PI));d.x+=h,d.y+=y;var M=d.clone();d.z+=f;var v=m.b.Matrix4.multiplyByPoint(s,d,new m.b.Cartesian3),g=m.b.Matrix4.multiplyByPoint(s,M,new m.b.Cartesian3);return{position:v,groundPosition:g,heading:b,pitch:i,roll:0}}e.default=g}}]);