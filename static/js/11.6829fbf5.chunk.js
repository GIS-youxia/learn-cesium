(this["webpackJsonplearn-cesium"]=this["webpackJsonplearn-cesium"]||[]).push([[11,15],{141:function(e,t,a){"use strict";a.r(t),a.d(t,"positions",(function(){return o})),a.d(t,"lastPosition",(function(){return z})),a.d(t,"lastOrientation",(function(){return U}));for(var n=a(46),i=a.p+"static/media/CesiumMilkTruck.a9e6f54e.glb",r=a(98),o=[[-75.59685701983534,40.03777212564437,0],[-75.59751284840819,40.037625784396035,0],[-75.59752436893649,40.03762521293061,0],[-75.59753556564439,40.0376272278541,0],[-75.59755235855748,40.03763093311733,0],[-75.59756354026823,40.03763717624739,0],[-75.59757299408281,40.03764388127161,0],[-75.59758417874735,40.037654826771465,0],[-75.59759281350301,40.03766684520388,0],[-75.59767412977382,40.03784933701905,0]],s=0,c=0,l=[],u=[],d=[],p=[],b=1;b<o.length;++b){var h,v,m=(h=r.b.Cartesian3).fromDegrees.apply(h,Object(n.a)(o[b-1])),f=(v=r.b.Cartesian3).fromDegrees.apply(v,Object(n.a)(o[b])),g=r.b.Cartesian3.distance(m,f);s+=g,l.push(g);var w=N(m,f),y=A(w.prev,w.next),T=r.b.Transforms.headingPitchRollQuaternion(m,new r.b.HeadingPitchRoll(r.b.Math.toRadians(y+-90),r.b.Math.toRadians(0),r.b.Math.toRadians(0)));u.push(T)}for(var C=0;C<o.length;C++){var j=u[C]||{},M=j.x,O=j.y,x=j.z,D=j.w;if(0!==C){var k=l[C-1]/s*10;c+=k,d.push.apply(d,[c].concat(Object(n.a)(o[C])));var P=u[C-1],S=P.x,E=P.y,I=P.z,L=P.w;p.push(k>=.5?c-.5:c,S,E,I,L),C===o.length-1?p.push(c,S,E,I,L):p.push(c,M,O,x,D)}else d.push.apply(d,[0].concat(Object(n.a)(o[0]))),p.push(0,M,O,x,D)}var R=r.b.JulianDate.now(),H=r.b.JulianDate.addSeconds(R,10,new r.b.JulianDate),J=r.b.JulianDate.toIso8601(R),B=r.b.JulianDate.toIso8601(H),F=[{id:"document",version:"1.0",clock:{interval:"".concat(J,"/").concat(B),currentTime:J,multiplier:1,range:"UNBOUNDED"}},{id:"CesiumMilkTruck",model:{gltf:i},position:{epoch:J,cartographicDegrees:d},orientation:{epoch:J,unitQuaternion:p}}];function N(e,t){var a=r.b.Transforms.eastNorthUpToFixedFrame(e),n=r.b.Matrix4.inverse(a,new r.b.Matrix4);return{prev:r.b.Matrix4.multiplyByPoint(n,e,new r.b.Cartesian3),next:r.b.Matrix4.multiplyByPoint(n,t,new r.b.Cartesian3)}}function A(e,t){var a=e.x,n=e.y,i=t.x,r=t.y,o=i-a,s=r-n;if(0===o)return s>=0?0:180;if(0===s)return o>0?90:-90;var c=(i-a)/(r-n),l=Math.atan(c)/Math.PI*180;if(s>0)return l;var u=i-a>0?1:-1;return(180-Math.abs(l))*u}console.log(F);var z=o[o.length-1],U=u[u.length-1];t.default=F},144:function(e,t,a){"use strict";a.r(t);a(291);var n=a(292),i=a.n(n),r=a(11),o=a.n(r),s=a(46),c=a(14),l=a(16),u=a(19),d=a(28),p=a(29),b=a(13),h=a(98),v=a(141),m=a(34),f=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={disabled:!0},e.loadCZML=Object(c.a)(o.a.mark((function t(){var a,n,i,r,c,l,u,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.viewer,n=a.scene,i=a.dataSources,r=a.clock,e.ds&&i.remove(e.ds),t.next=4,i.add(h.b.CzmlDataSource.load(v.default));case 4:e.ds=t.sent,c=e.ds.entities.getById("CesiumMilkTruck"),l=c.position,e.viewer.trackedEntity=c,e.viewer.camera.moveBackward(3e3),u=[c],d=function e(){var t,a=l.getValue(r.currentTime);if(!a)return n.postRender.removeEventListener(e),c.orientation=v.lastOrientation,void(c.position=n.clampToHeight((t=h.b.Cartesian3).fromDegrees.apply(t,Object(s.a)(v.lastPosition)),u));c.position=n.clampToHeight(a,u)},n.postRender.addEventListener(d);case 12:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.viewer=new h.b.Viewer("stage",{terrainProvider:h.b.createWorldTerrain(),shouldAnimate:!0}),Object(h.a)(this.viewer,{});var t=this.viewer,a=t.scene,n=t.camera,i=t.screenSpaceEventHandler;a.postProcessStages.fxaa.enabled=!0,a.debugShowFramesPerSecond=!0;var r=a.primitives.add(new h.b.Cesium3DTileset({url:h.b.IonResource.fromAssetId(40866)}));n.setView({destination:new h.b.Cartesian3(1216403.8845586285,-4736357.493351395,4081299.715698949),orientation:new h.b.HeadingPitchRoll(4.2892217081808806,-.4799070147502502,6.279789177843313),endTransform:h.b.Matrix4.IDENTITY}),this.viewer.entities.add({polyline:{positions:v.positions.map((function(e){var t;return(t=h.b.Cartesian3).fromDegrees.apply(t,Object(s.a)(e))})),classificationType:h.b.ClassificationType.BOTH,width:10,material:h.b.Color.RED,clampToGround:!0}}),a.clampToHeightSupported?r.initialTilesLoaded.addEventListener((function(){e.setState({disabled:!1})})):window.alert("This browser does not support clampToHeight."),i.setInputAction((function(e){var t=a.pickPosition(e.position);if(t){var n=h.b.Cartographic.fromCartesian(t);console.log(h.b.Math.toDegrees(n.longitude)),console.log(h.b.Math.toDegrees(n.latitude))}}),h.b.ScreenSpaceEventType.LEFT_CLICK)}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"toolbar",children:Object(m.jsx)(i.a,{type:"primary",onClick:this.loadCZML,disabled:this.state.disabled,children:"Load CZML"})}),Object(m.jsx)("div",{id:"stage"})]})}}]),a}(b.Component);t.default=f}}]);