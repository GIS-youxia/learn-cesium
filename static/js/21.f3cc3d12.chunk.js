(this["webpackJsonplearn-cesium"]=this["webpackJsonplearn-cesium"]||[]).push([[21],{43:function(e,t,n){"use strict";n.r(t);var r,a,i=n(102),o=n(103),s=n.n(o),c=n(129),l=n(104),u=n(32),d=n(33),h=n(34),p=n(35),v=n(0),f=n(70),m=n(128),b=n.n(m),y=n(5),g=[-85,36],w=[-84.9,36.1],O=(r=f.a.Cartesian3).fromDegrees.apply(r,g),j=(a=f.a.Cartesian3).fromDegrees.apply(a,w),C=100,k=[];function D(e){var t=b()(),n=t.clone().add(30,"s"),r=t.toISOString(),a=n.toISOString();return[{id:"document",name:"\u89c2\u5149\u8def\u7ebf",version:"1.0",clock:{interval:"".concat(r,"/").concat(a),currentTime:r,multiplier:1,range:"UNBOUNDED"}},{id:"path",name:"\u89c2\u5149\u8def\u7ebf",description:"<p>\u89c2\u5149\u8def\u7ebf</p>",availability:"".concat(r,"/").concat(a),path:{material:{polylineOutline:{color:{rgba:[0,0,0,255]},outlineColor:{rgba:[0,0,0,255]},outlineWidth:5}},width:8,leadTime:0,trailTime:1e3,resolution:5},point:{pixelSize:0},position:{epoch:r,cartographicDegrees:P(e)}}]}function P(e){return e.flatMap((function(e,t){return[30*t/C,f.a.Math.toDegrees(e.longitude),f.a.Math.toDegrees(e.latitude),e.height+200]}))}var x=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={viewDisabled:!0},e.getPathPositions=Object(l.a)(s.a.mark((function t(){var n,r,a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=0;r<=C;++r)a=r/C,n.push(f.a.Cartographic.fromCartesian(f.a.Cartesian3.lerp(O,j,a,new f.a.Cartesian3)));return t.prev=2,t.next=5,f.a.sampleTerrain(e.terrainProvider,15,n);case 5:return i=t.sent,k=Object(c.a)(i),console.log("positions ready\n",k),t.abrupt("return",k);case 11:return t.prev=11,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),e.loadCZML=function(t){var n=e.viewer.entities.getById("path");console.log(n);var r=t?k:Object(c.a)(k).reverse();e.ds&&e.viewer.dataSources.remove(e.ds,!0),e.viewer.dataSources.add(f.a.CzmlDataSource.load(D(r))).then((function(t){e.ds=t,e.viewer.trackedEntity=t.entities.getById("path")}))},e.flyTo=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.viewer.trackedEntity=void 0,e.camera.flyTo({destination:Object(i.a)(f.a.Cartesian3.fromDegrees,Object(c.a)(t?w:g).concat([1e3])),orientation:{heading:f.a.Math.toRadians(0),pitch:f.a.Math.toRadians(-90),roll:f.a.Math.toRadians(0)}})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.terrainProvider=f.a.createWorldTerrain(),this.viewer=new f.a.Viewer("stage",{terrainProvider:this.terrainProvider,shouldAnimate:!0}),this.scene=this.viewer.scene,this.camera=this.scene.camera,this.scene.groundPrimitives.add(new f.a.GroundPolylinePrimitive({geometryInstances:new f.a.GeometryInstance({geometry:new f.a.GroundPolylineGeometry({positions:[O,j],width:4})})})),this.flyTo(),this.getPathPositions();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.viewDisabled;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{disabled:t,className:"tool-btn",style:{top:60},onClick:function(){return e.loadCZML()},children:"view to start"}),Object(y.jsx)("button",{disabled:t,className:"tool-btn",style:{top:105},onClick:function(){return e.loadCZML(!0)},children:"view to end"}),Object(y.jsx)("button",{className:"tool-btn",style:{top:150},onClick:function(){return e.flyTo()},children:"Fly to Start"}),Object(y.jsx)("button",{className:"tool-btn",style:{top:195},onClick:function(){return e.flyTo(!0)},children:"Fly to end"}),Object(y.jsx)("div",{id:"stage"})]})}}]),n}(v.Component);t.default=x},70:function(e,t,n){"use strict";var r=n(76);t.a=r},73:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=73},74:function(e,t){},75:function(e,t){}}]);