{"version":3,"sources":["pages/3DModel/index.js"],"names":["Model","useEffect","viewer","Cesium","CesiumWidget","scene","ScreenSpaceEventHandler","canvas","setInputAction","movement","pick","endPosition","defined","node","mesh","console","log","name","ScreenSpaceEventType","MOUSE_MOVE","url","height","heading","pitch","roll","hpr","HeadingPitchRoll","origin","Cartesian3","fromDegrees","modelMatrix","Transforms","headingPitchRollToFixedFrame","primitives","removeAll","add","fromGltf","minimumPixelSize","readyPromise","then","model","color","Color","fromAlpha","WHITE","colorBlendMode","ColorBlendMode","HIGHLIGHT","colorBlendAmount","activeAnimations","addAll","multiplier","loop","ModelAnimationLoop","REPEAT","camera","controller","screenSpaceCameraController","r","Math","max","boundingSphere","radius","frustum","near","minimumZoomDistance","center","Matrix4","multiplyByPoint","toRadians","lookAt","HeadingPitchRange","otherwise","error","createModel","id","style"],"mappings":"mHAAA,mCAiFeA,UA3ED,WAwEZ,OAvEAC,qBAAU,WACR,IAAMC,EAAS,IAAIC,IAAOC,aAAa,SAE/BC,EAAUH,EAAVG,MAoDQ,IAAIF,IAAOG,wBAAwBD,EAAME,QACjDC,gBAAe,SAAUC,GAC/B,IAAMC,EAAOL,EAAMK,KAAKD,EAASE,aAC7BR,IAAOS,QAAQF,IAASP,IAAOS,QAAQF,EAAKG,OAASV,IAAOS,QAAQF,EAAKI,OAE3EC,QAAQC,IAAI,SAAWN,EAAKG,KAAKI,KAAO,WAAaP,EAAKI,KAAKG,QAEhEd,IAAOe,qBAAqBC,aAzD/B,SAAqBC,GAA4D,IAAvDC,EAAsD,uDAA7C,EAAKC,EAAwC,uDAA9B,EAAKC,EAAyB,uDAAjB,EAAKC,EAAY,uDAAL,EACnEC,EAAM,IAAItB,IAAOuB,iBAAiBJ,EAASC,EAAOC,GAElDG,EAASxB,IAAOyB,WAAWC,aAAa,YAAa,WAAYR,GACjES,EAAc3B,IAAO4B,WAAWC,6BAA6BL,EAAQF,GAE3EpB,EAAM4B,WAAWC,YAET7B,EAAM4B,WAAWE,IACvBhC,IAAOH,MAAMoC,SAAS,CACpBhB,IAAKA,EACLU,YAAaA,EACbO,iBAAkB,OAIhBC,aACHC,MAAK,SAAUC,GACdA,EAAMC,MAAQtC,IAAOuC,MAAMC,UAAUxC,IAAOuC,MAAME,MAAO,GACzDJ,EAAMK,eAAiB1C,IAAO2C,eAAeC,UAC7CP,EAAMQ,iBAAmB,GAGzBR,EAAMS,iBAAiBC,OAAO,CAC5BC,WAAY,GACZC,KAAMjD,IAAOkD,mBAAmBC,SAGlC,IAAMC,EAASrD,EAAOqD,OAGhBC,EAAanD,EAAMoD,4BACnBC,EAAI,EAAMC,KAAKC,IAAIpB,EAAMqB,eAAeC,OAAQP,EAAOQ,QAAQC,MACrER,EAAWS,oBAA0B,GAAJP,EAEjC,IAAMQ,EAAS/D,IAAOgE,QAAQC,gBAC5B5B,EAAMV,YACNU,EAAMqB,eAAeK,OACrB,IAAI/D,IAAOyB,YAGPN,EAAUnB,IAAOwD,KAAKU,UAAU,KAChC9C,EAAQpB,IAAOwD,KAAKU,WAAW,IACrCd,EAAOe,OAAOJ,EAAQ,IAAI/D,IAAOoE,kBAAkBjD,EAASC,EAAW,EAAJmC,OAEpEc,WAAU,SAAUC,GACnB1D,QAAQ0D,MAAMA,MAiBpBC,CAAY,yBAJG,IACC,EACFvE,IAAOwD,KAAKU,UAAU,IACvBlE,IAAOwD,KAAKU,WAAW,OAEnC,IAEI,qBAAKM,GAAG,QAAQC,MAAO,CAAEvD,OAAQ","file":"static/js/5.0db532ef.chunk.js","sourcesContent":["import { useEffect } from 'react'\nimport Cesium from '@/utils/cesium'\n\n/** @type import('cesium').Model **/\nlet model\n\nconst Model = () => {\n  useEffect(() => {\n    const viewer = new Cesium.CesiumWidget('stage')\n\n    const { scene } = viewer\n\n    function createModel(url, height = 0.0, heading = 0.0, pitch = 0.0, roll = 0.0) {\n      const hpr = new Cesium.HeadingPitchRoll(heading, pitch, roll)\n\n      const origin = Cesium.Cartesian3.fromDegrees(-123.0744619, 44.0503706, height)\n      const modelMatrix = Cesium.Transforms.headingPitchRollToFixedFrame(origin, hpr)\n\n      scene.primitives.removeAll()\n\n      model = scene.primitives.add(\n        Cesium.Model.fromGltf({\n          url: url,\n          modelMatrix: modelMatrix,\n          minimumPixelSize: 128\n        })\n      )\n\n      model.readyPromise\n        .then(function (model) {\n          model.color = Cesium.Color.fromAlpha(Cesium.Color.WHITE, 1)\n          model.colorBlendMode = Cesium.ColorBlendMode.HIGHLIGHT\n          model.colorBlendAmount = 0.5\n\n          // Play and loop all animations at half-speed\n          model.activeAnimations.addAll({\n            multiplier: 0.5,\n            loop: Cesium.ModelAnimationLoop.REPEAT\n          })\n\n          const camera = viewer.camera\n\n          // Zoom to model\n          const controller = scene.screenSpaceCameraController\n          const r = 2.0 * Math.max(model.boundingSphere.radius, camera.frustum.near)\n          controller.minimumZoomDistance = r * 0.5\n\n          const center = Cesium.Matrix4.multiplyByPoint(\n            model.modelMatrix,\n            model.boundingSphere.center,\n            new Cesium.Cartesian3()\n          )\n\n          const heading = Cesium.Math.toRadians(230.0)\n          const pitch = Cesium.Math.toRadians(-20.0)\n          camera.lookAt(center, new Cesium.HeadingPitchRange(heading, pitch, r * 2.0))\n        })\n        .otherwise(function (error) {\n          console.error(error)\n        })\n    }\n\n    const handler = new Cesium.ScreenSpaceEventHandler(scene.canvas)\n    handler.setInputAction(function (movement) {\n      const pick = scene.pick(movement.endPosition)\n      if (Cesium.defined(pick) && Cesium.defined(pick.node) && Cesium.defined(pick.mesh)) {\n        // Output glTF node and mesh under the mouse.\n        console.log('node: ' + pick.node.name + '. mesh: ' + pick.mesh.name)\n      }\n    }, Cesium.ScreenSpaceEventType.MOUSE_MOVE)\n\n    const height = 300.0\n    const heading = 0.0\n    const pitch = Cesium.Math.toRadians(10.0)\n    const roll = Cesium.Math.toRadians(-20.0)\n    createModel('/models/Cesium_Air.glb', height, heading, pitch, roll)\n  }, [])\n\n  return <div id=\"stage\" style={{ height: '100vh' }}></div>\n}\n\nexport default Model\n"],"sourceRoot":""}