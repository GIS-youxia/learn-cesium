{"version":3,"sources":["cases/Camera/OrbitFly.jsx","hooks/useCesium.js","../node_modules/cesium/Source/Core sync ///cesium//cesium//Source//Core//buildModuleUrl/.js","cases/components/CesiumContainer/CesiumContainer.jsx","cases/components/Toolbar/Toolbar.jsx"],"names":["startPosition","Cartesian3","fromDegrees","OrbitFly","viewerRef","useCesium","useState","flying","setFlying","appearance","size","onClick","viewer","current","clock","pitch","CesiumMath","toRadians","startTime","JulianDate","fromDate","Date","stopTime","addSeconds","clone","currentTime","clockRange","ClockRange","CLAMPED","clockStep","ClockStep","SYSTEM_CLOCK","initialHeading","camera","heading","onTick","addEventListener","Exection","delTime","secondsDifference","scene","setView","destination","orientation","moveBackward","compare","removeEventListener","disabled","callback","useRef","useEffect","Viewer","fullscreenElement","debugShowFramesPerSecond","postProcessStages","fxaa","enabled","createViewer","destroy","webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","CesiumContainer","children","Toolbar","className"],"mappings":"4MAQMA,EAAgBC,IAAWC,YAAX,MAAAD,IADD,EAAE,GAAM,GAAM,MA8DpBE,UA3DE,WACf,IAAMC,EAAYC,cAClB,EAA4BC,oBAAS,GAArC,mBAAOC,EAAP,KAAeC,EAAf,KA8CA,OACE,cAAC,UAAD,UACE,cAAC,UAAD,UACE,cAAC,IAAD,CAAQC,WAAW,UAAUC,KAAK,KAAKC,QA/C7C,WACE,IAAMC,EAASR,EAAUS,QACzB,GAAKD,EAAL,CAEA,IAAQE,EAAUF,EAAVE,MAGFC,EAAQC,IAAWC,WAAW,IAK9BC,EAAYC,IAAWC,SAAS,IAAIC,MAEpCC,EAAWH,IAAWI,WAAWL,EAAW,EAAG,IAAIC,KAEzDL,EAAMI,UAAYA,EAAUM,QAC5BV,EAAMQ,SAAWA,EAASE,QAC1BV,EAAMW,YAAcP,EAAUM,QAC9BV,EAAMY,WAAaC,IAAWC,QAC9Bd,EAAMe,UAAYC,IAAUC,aAE5B,IAAMC,EAAiBpB,EAAOqB,OAAOC,QAkBrC1B,GAAU,GACVM,EAAMqB,OAAOC,kBAlBI,SAAXC,IAEJ,IAAMC,EAAUnB,IAAWoB,kBAAkBzB,EAAMW,YAAaX,EAAMI,WAChEgB,EAAUlB,IAAWC,UAjBf,GAiByBqB,GAAmBN,EACxDpB,EAAO4B,MAAMP,OAAOQ,QAAQ,CAC1BC,YAAa1C,EACb2C,YAAa,CACXT,QAASA,EACTnB,MAAOA,KAGXH,EAAO4B,MAAMP,OAAOW,aAvBL,MAwBXzB,IAAW0B,QAAQ/B,EAAMW,YAAaX,EAAMQ,WAAa,IAC3DR,EAAMqB,OAAOW,oBAAoBT,GACjC7B,GAAU,SAUgDuC,SAAUxC,EAApE,SACGA,EAAS,SAAW,oB,6EC9D/B,oBAgDeF,IA/Bf,SAAmB2C,GACjB,IAAM5C,EAAY6C,iBAAO,MAgBzB,OAfAC,qBAAU,WACR,IAAMtC,EAiBV,WACE,IAAMA,EAAS,IAAIuC,IAAO,kBAAmB,CAC3CC,kBAAmB,oBAMrB,OAHAxC,EAAO4B,MAAMa,0BAA2B,EACxCzC,EAAO4B,MAAMc,kBAAkBC,KAAKC,SAAU,EAEvC5C,EAzBU6C,GAKf,OAJArD,EAAUS,QAAUD,EAEpBoC,GAAYA,EAASpC,GAEd,WACL,IACEA,EAAO8C,UACP,cAIH,IAEItD,I,kBClCT,SAASuD,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,K,wECRzB,yBAMeC,UAJf,YAAwC,IAAbC,EAAY,EAAZA,SACzB,OAAO,qBAAKF,GAAG,kBAAR,SAA2BE,M,gCCHpC,yBAMeC,UAJf,YAAgC,IAAbD,EAAY,EAAZA,SACjB,OAAO,qBAAKE,UAAU,UAAf,SAA0BF","file":"static/js/9.1f0c8447.chunk.js","sourcesContent":["import { useState } from 'react'\nimport CesiumContainer from '@/cases/components/CesiumContainer/CesiumContainer'\nimport Toolbar from '@/cases/components/Toolbar/Toolbar'\nimport useCesium from '@/hooks/useCesium'\nimport { Cartesian3, JulianDate, Math as CesiumMath, ClockStep, ClockRange } from 'cesium'\nimport { Button } from 'rsuite'\n\nconst startDegrees = [-85.0, 36.0, 1000.0]\nconst startPosition = Cartesian3.fromDegrees(...startDegrees)\n\nconst OrbitFly = () => {\n  const viewerRef = useCesium()\n  const [flying, setFlying] = useState(false)\n\n  function oribtFly() {\n    const viewer = viewerRef.current\n    if (!viewer) return\n\n    const { clock } = viewer\n\n    // 相机看点的角度，如果大于0那么则是从地底往上看，所以要为负值，这里取-30度\n    const pitch = CesiumMath.toRadians(-30)\n    // 给定飞行一周所需时间，比如10s, 那么每秒转动度数\n    const angle = 360 / 5\n    // 给定相机距离点多少距离飞行，这里取值为5000m\n    const distance = 15000\n    const startTime = JulianDate.fromDate(new Date())\n\n    const stopTime = JulianDate.addSeconds(startTime, 5, new JulianDate())\n\n    clock.startTime = startTime.clone() // 开始时间\n    clock.stopTime = stopTime.clone() // 结速时间\n    clock.currentTime = startTime.clone() // 当前时间\n    clock.clockRange = ClockRange.CLAMPED // 行为方式\n    clock.clockStep = ClockStep.SYSTEM_CLOCK // 时钟设置为当前系统时间; 忽略所有其他设置。\n    // 相机的当前heading\n    const initialHeading = viewer.camera.heading\n    const Exection = () => {\n      // 当前已经过去的时间，单位s\n      const delTime = JulianDate.secondsDifference(clock.currentTime, clock.startTime)\n      const heading = CesiumMath.toRadians(delTime * angle) + initialHeading\n      viewer.scene.camera.setView({\n        destination: startPosition,\n        orientation: {\n          heading: heading,\n          pitch: pitch\n        }\n      })\n      viewer.scene.camera.moveBackward(distance)\n      if (JulianDate.compare(clock.currentTime, clock.stopTime) >= 0) {\n        clock.onTick.removeEventListener(Exection)\n        setFlying(false)\n      }\n    }\n    setFlying(true)\n    clock.onTick.addEventListener(Exection)\n  }\n\n  return (\n    <CesiumContainer>\n      <Toolbar>\n        <Button appearance=\"primary\" size=\"sm\" onClick={oribtFly} disabled={flying}>\n          {flying ? 'Flying' : 'Orbit Fly'}\n        </Button>\n      </Toolbar>\n    </CesiumContainer>\n  )\n}\n\nexport default OrbitFly\n","import { useEffect, useRef } from 'react'\nimport { Viewer } from 'cesium'\n\n/**\n * @callback CesiumHandler\n *\n * @param {Viewer} viewer Viewer instance.\n */\n\n/** @typedef {import('react')} React */\n\n/**\n * Use cesium hook.\n *\n * @param {CesiumHandler} callback\n * @returns {React.MutableRefObject.<null|Viewer>}\n */\nfunction useCesium(callback) {\n  const viewerRef = useRef(null)\n  useEffect(() => {\n    const viewer = createViewer()\n    viewerRef.current = viewer\n\n    callback && callback(viewer)\n\n    return () => {\n      try {\n        viewer.destroy()\n      } catch {}\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return viewerRef\n}\n\nfunction createViewer() {\n  const viewer = new Viewer('cesiumContainer', {\n    fullscreenElement: 'cesiumContainer'\n  })\n\n  viewer.scene.debugShowFramesPerSecond = true\n  viewer.scene.postProcessStages.fxaa.enabled = true\n\n  return viewer\n}\n\nexport default useCesium\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 190;","import './CesiumContainer.less'\n\nfunction CesiumContainer({ children }) {\n  return <div id=\"cesiumContainer\">{children}</div>\n}\n\nexport default CesiumContainer\n","import './Toolbar.less'\n\nfunction Toolbar({ children }) {\n  return <div className=\"toolbar\">{children}</div>\n}\n\nexport default Toolbar\n"],"sourceRoot":""}